{"ast":null,"code":"import _slicedToArray from\"C:/Users/DELL/OneDrive/Desktop/mern/Insta-Clone/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import PostDetail from\"../components/PostDetail\";import\"../css/Profile.css\";import ProfilePic from\"../components/ProfilePic\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profie(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),pic=_useState2[0],setPic=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),changePic=_useState10[0],setChangePic=_useState10[1];var toggleDetails=function toggleDetails(posts){if(show){setShow(false);}else{setShow(true);setPosts(posts);}};var changeprofile=function changeprofile(){if(changePic){setChangePic(false);}else{setChangePic(true);}};useEffect(function(){fetch(\"/user/\".concat(JSON.parse(localStorage.getItem(\"user\"))._id),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);setPic(result.post);setUser(result.user);console.log(pic);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:changeprofile,src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pofile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:JSON.parse(localStorage.getItem(\"user\")).name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[pic?pic.length:\"0\",\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:pic.map(function(pics){return/*#__PURE__*/_jsx(\"img\",{src:pics.photo,onClick:function onClick(){toggleDetails(pics);},className:\"item\"},pics._id);})}),show&&/*#__PURE__*/_jsx(PostDetail,{item:posts,toggleDetails:toggleDetails}),changePic&&/*#__PURE__*/_jsx(ProfilePic,{changeprofile:changeprofile})]});}","map":{"version":3,"names":["React","useEffect","useState","PostDetail","ProfilePic","Profie","picLink","pic","setPic","show","setShow","posts","setPosts","user","setUser","changePic","setChangePic","toggleDetails","changeprofile","fetch","JSON","parse","localStorage","getItem","_id","headers","Authorization","then","res","json","result","console","log","post","Photo","name","display","length","followers","following","width","opacity","margin","map","pics","photo"],"sources":["C:/Users/DELL/OneDrive/Desktop/mern/Insta-Clone/frontend/src/screens/Profie.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PostDetail from \"../components/PostDetail\";\r\nimport \"../css/Profile.css\";\r\nimport ProfilePic from \"../components/ProfilePic\";\r\n\r\nexport default function Profie() {\r\n  var picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"\r\n  const [pic, setPic] = useState([]);\r\n  const [show, setShow] = useState(false)\r\n  const [posts, setPosts] = useState([]);\r\n  const [user, setUser] = useState(\"\")\r\n  const [changePic, setChangePic] = useState(false)\r\n\r\n\r\n  const toggleDetails = (posts) => {\r\n    if (show) {\r\n      setShow(false);\r\n    } else {\r\n      setShow(true);\r\n      setPosts(posts);\r\n    }\r\n  };\r\n\r\n  const changeprofile = () => {\r\n    if (changePic) {\r\n      setChangePic(false)\r\n    } else {\r\n      setChangePic(true)\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    fetch(`/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`, {\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result)\r\n        setPic(result.post);\r\n        setUser(result.user)\r\n        console.log(pic);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {/* Profile frame */}\r\n      <div className=\"profile-frame\">\r\n        {/* profile-pic */}\r\n        <div className=\"profile-pic\">\r\n          <img\r\n            onClick={changeprofile}\r\n            src={user.Photo ? user.Photo : picLink}\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n        {/* profile-data */}\r\n        <div className=\"pofile-data\">\r\n          <h1>{JSON.parse(localStorage.getItem(\"user\")).name}</h1>\r\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\r\n            <p>{pic ? pic.length : \"0\"} posts</p>\r\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\r\n            <p>{user.following ? user.following.length : \"0\"} following</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr\r\n        style={{\r\n          width: \"90%\",\r\n\r\n          opacity: \"0.8\",\r\n          margin: \"25px auto\",\r\n        }}\r\n      />\r\n      {/* Gallery */}\r\n      <div className=\"gallery\">\r\n        {pic.map((pics) => {\r\n          return <img key={pics._id} src={pics.photo}\r\n            onClick={() => {\r\n              toggleDetails(pics)\r\n            }}\r\n            className=\"item\"></img>;\r\n        })}\r\n      </div>\r\n      {show &&\r\n        <PostDetail item={posts} toggleDetails={toggleDetails} />\r\n      }\r\n      {\r\n        changePic &&\r\n        <ProfilePic changeprofile={changeprofile} />\r\n      }\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}